<!--Section: Testimonials v.1-->
<ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '3px' }"></ngx-loading>

<section class="section pb-3 text-center" *ngIf="!loading">

  <!--Section heading-->
  <h1 class="section-heading h1 pt-4">Perfil</h1>
  <!--Section description-->


  <div class="row">



    <!--Grid column-->
    <div class="col-lg-12 col-md-12 mb-4">




      <!--Card-->
      <div class="text-center">
        <div class="card testimonial-card">

          <!--Background color-->
          <div class="card-up blue lighten-2">
          </div>

          <!--Avatar-->
          <div class="avatar mx-auto white"><img src="{{urlImagenUsuario}}" alt="avatar mx-auto white" class="img-perfil rounded-circle img-fluid">
          </div>

          <div class="card-body">
            <!--Name-->
            <h4 class="card-title mt-1">{{nombreAlumno}}<p class="user">({{usuarioAlumno}})</p>
            </h4>
            <hr>
            <!--Quotation
            <p><i class="fa fa-quote-left"></i> Neque cupiditate assumenda in maiores repudiandae mollitia
              architecto.</p>-->
            <p *ngIf="diasdif <= 0 " class="suscripcion">Ultima Suscripci칩n:
              {{ultimaSuscripcion.servicio.nombreServicio}}</p>
            <p *ngIf="diasdif > 0 " class="suscripcion">Suscripci칩n actual:
              {{ultimaSuscripcion.servicio.nombreServicio}}</p>
            <p class="estado">Estado de suscripci칩n:
              <span *ngIf="diasdif > 0 && diasdif < 8 && !ultimaSuscripcion.fechaFin == ''" class="porTerminar">Termina
                el
                {{replaceAt(ultimaSuscripcion.fechaFin,10," ") | date:'mediumDate'}}</span>
              <span *ngIf="diasdif > 8 && !ultimaSuscripcion.fechaFin == ''" class="lejosdevencer">Termina el
                {{replaceAt(ultimaSuscripcion.fechaFin,10," ")
                | date:'mediumDate'}}</span>
              <span *ngIf="diasdif <= 0 && !ultimaSuscripcion.fechaFin == ''" class="vencido">Termino el
                {{replaceAt(ultimaSuscripcion.fechaFin,10," ") |
                date:'mediumDate'}}</span>
              <span *ngIf="ultimaSuscripcion.fechaFin == '' && ultimaSuscripcion.sesiones < 3" class="vencido">Te
                quedan {{ultimaSuscripcion.sesiones}} sesiones</span>
              <span *ngIf="ultimaSuscripcion.fechaFin == '' && ultimaSuscripcion.sesiones >= 3" class="lejosdevencer">Te
                quedan {{ultimaSuscripcion.sesiones}} sesiones</span>

            </p>

            <p>

              <!--Facebook-->
              <a type="button" mdbBtn floating="true" size="lg" class="btn-fb waves-light prefix blue-text"
                mdbWavesEffect><i class="fa fa-facebook-f"></i></a>
              <!--Twitter-->
              <a type="button" mdbBtn floating="true" size="lg" class="btn-tw waves-light prefix blue-text"
                mdbWavesEffect><i class="fa fa-twitter"></i></a>
              <a type="button" mdbBtn floating="true" size="lg" class="btn-tw waves-light prefix blue-text"
                mdbWavesEffect><i class="fa fa-instagram"></i></a>
            </p>

            <button type="button" class="btn btn-info btn-rounded btn-md" (click)="openDialogEditUser()">editar<i class="fa fa-user "
                aria-hidden="true"></i></button>
            <a class="btn aqua-gradient  btn-md" href="#/student/medicalHistory">
              Historial Medico<i class="fa fa-heartbeat"></i>
            </a>
            <button type="button" class="btn btn-info btn-rounded btn-md" (click)="openDialogEditPasswordUser()">Editar
              contrase침a<i class="fa fa-key " aria-hidden="true"></i></button>
            <!-- <button type="button" class="btn btn-outline-default btn-rounded waves-effect"><i class="fa fa-gem mr-2"
                    aria-hidden="true"></i>Button</button> -->
          </div>
          <hr>
          <div class="historial-pagos">
            <h3>Historial de Suscripciones</h3>
            <div class="suscripciones">
              <div *ngFor="let suscripcion of historialSuscripciones">
                <mat-accordion class="example-headers-align">
                  <mat-expansion-panel>
                    <mat-expansion-panel-header>
                      <mat-panel-title>
                        {{suscripcion.servicio.nombreServicio}}
                      </mat-panel-title>
                      <mat-panel-description *ngIf="suscripcion.fechaFin != undefined">
                        {{replaceAt(suscripcion.fechaFin,10," ") | date:'mediumDate' }}
                      </mat-panel-description>
                      <mat-panel-description *ngIf="suscripcion.fechaFin == undefined">
                        {{suscripcion.sesiones}} sesiones
                      </mat-panel-description>
                    </mat-expansion-panel-header>
                    <p class="fechaRegistro">Fecha Inicio: {{replaceAt(suscripcion.fechaInicio,10," ") |
                      date:'mediumDate' }}</p>
                    <p *ngIf="suscripcion.fechaFin != undefined" class="fechaVencimiento">Fecha Final:
                      {{replaceAt(suscripcion.fechaFin,10," ") |
                      date:'mediumDate' }}</p>
                    <p *ngIf="suscripcion.fechaFin == undefined" class="fechaVencimiento">Numero de sesiones: {{
                      suscripcion.sesiones}}</p>
                    <p class="Costo">Total Pagado: {{suscripcion.precioSuscripcion | currency }}</p>
                  </mat-expansion-panel>
                </mat-accordion>

              </div>

            </div>
          </div>

        </div>
      </div>
      <!--Card-->

    </div>
    <!--Grid column-->


  </div>

</section>
<!--Section: Testimonials v.1-->
